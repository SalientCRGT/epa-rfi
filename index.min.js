var ngapp=angular.module("ngapp",["ngRoute","ngResource","ngAnimate"]);ngapp.config(["$routeProvider","$resourceProvider",function(e,r){function i(e){var r=angular.fromJson(e),i=r.data||{};return i.$code=r.code,i.$msg=r.msg,i}function t(e){var r=angular.fromJson(e),i=r.data||[];return i.$code=r.code,i.$msg=r.msg,i}e.when("/",{templateUrl:"ngapp/search/search.html",controller:"SearchCtrl",resolve:{facilities:["FacilityResource",function(e){return e.query()}]}}).otherwise({redirectTo:"/"}),r.defaults.actions={get:{method:"GET",params:{id:"@registryId"},transformResponse:i},query:{method:"GET",isArray:!0,transformResponse:t}}}]),ngapp.factory("FacilityResource",["$resource",function(e){return e("/api/facilities/:id")}]),ngapp.controller("SearchCtrl",["$scope","$http","facilities","FacilityResource",function(e,r,i,t){e.facilities=i,e.search=function(){e.facilities=t.query(e.searchParameters)},e.getFacilities=function(){console.log(e.q),e.q.length>3&&(e.facilities=r.get("/api/facilities/search/"+e.q.split(" ").join("+")).then(function(r){e.facilities=e.transformAll(r.data),console.log("facilities: "+e.facilities)}))},e.transformAll=function(e){var r=angular.fromJson(e),i=r.data||[];return i.$code=r.code,i.$msg=r.msg,i}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nYXBwL25nYXBwLmpzIiwibmdhcHAvc2VhcmNoL3NlYXJjaC5qcyJdLCJuYW1lcyI6WyJuZ2FwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRyZXNvdXJjZVByb3ZpZGVyIiwidHJhbnNmb3JtT25lIiwiZGF0YSIsImpzb25EYXRhIiwiZnJvbUpzb24iLCJyZXN1bHQiLCIkY29kZSIsImNvZGUiLCIkbXNnIiwibXNnIiwidHJhbnNmb3JtQWxsIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInJlc29sdmUiLCJmYWNpbGl0aWVzIiwiRmFjaWxpdHlSZXNvdXJjZSIsInF1ZXJ5Iiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImRlZmF1bHRzIiwiYWN0aW9ucyIsImdldCIsIm1ldGhvZCIsInBhcmFtcyIsImlkIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJpc0FycmF5IiwiZmFjdG9yeSIsIiRyZXNvdXJjZSIsIiRzY29wZSIsIiRodHRwIiwic2VhcmNoIiwic2VhcmNoUGFyYW1ldGVycyIsImdldEZhY2lsaXRpZXMiLCJjb25zb2xlIiwibG9nIiwicSIsImxlbmd0aCIsInNwbGl0Iiwiam9pbiIsInRoZW4iLCJyZXNwb25zZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsT0FBQUMsUUFBQUMsT0FBQSxTQUFBLFVBQUEsYUFBQSxhQUVBRixPQUFBRyxRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBaUJBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQVAsUUFBQVEsU0FBQUYsR0FDQUcsRUFBQUYsRUFBQUQsUUFHQSxPQUZBRyxHQUFBQyxNQUFBSCxFQUFBSSxLQUNBRixFQUFBRyxLQUFBTCxFQUFBTSxJQUNBSixFQUlBLFFBQUFLLEdBQUFSLEdBQ0EsR0FBQUMsR0FBQVAsUUFBQVEsU0FBQUYsR0FDQUcsRUFBQUYsRUFBQUQsUUFHQSxPQUZBRyxHQUFBQyxNQUFBSCxFQUFBSSxLQUNBRixFQUFBRyxLQUFBTCxFQUFBTSxJQUNBSixFQTdCQU4sRUFDQVksS0FBQSxLQUNBQyxZQUFBLDJCQUNBQyxXQUFBLGFBQ0FDLFNBQ0FDLFlBQUEsbUJBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxhQUlBQyxXQUNBQyxXQUFBLE1BcUJBbkIsRUFBQW9CLFNBQUFDLFNBQ0FDLEtBQ0FDLE9BQUEsTUFDQUMsUUFBQUMsR0FBQSxlQUNBQyxrQkFBQXpCLEdBRUFnQixPQUNBTSxPQUFBLE1BQ0FJLFNBQUEsRUFDQUQsa0JBQUFoQixPQU1BZixNQUFBaUMsUUFBQSxvQkFBQSxZQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQSwwQkNwREFsQyxNQUFBa0IsV0FBQSxjQUFBLFNBQUEsUUFBQSxhQUFBLG1CQUFBLFNBQUFpQixFQUFBQyxFQUFBaEIsRUFBQUMsR0FDQWMsRUFBQWYsV0FBQUEsRUFFQWUsRUFBQUUsT0FBQSxXQUNBRixFQUFBZixXQUFBQyxFQUFBQyxNQUFBYSxFQUFBRyxtQkFHQUgsRUFBQUksY0FBQSxXQUNBQyxRQUFBQyxJQUFBTixFQUFBTyxHQUNBUCxFQUFBTyxFQUFBQyxPQUFBLElBQ0FSLEVBQUFmLFdBQUFnQixFQUFBVCxJQUFBLDBCQUFBUSxFQUFBTyxFQUFBRSxNQUFBLEtBQUFDLEtBQUEsTUFDQUMsS0FBQSxTQUFBQyxHQUNBWixFQUFBZixXQUFBZSxFQUFBcEIsYUFBQWdDLEVBQUF4QyxNQUNBaUMsUUFBQUMsSUFBQSxlQUFBTixFQUFBZixnQkFLQWUsRUFBQXBCLGFBQUEsU0FBQVIsR0FDQSxHQUFBQyxHQUFBUCxRQUFBUSxTQUFBRixHQUNBRyxFQUFBRixFQUFBRCxRQUdBLE9BRkFHLEdBQUFDLE1BQUFILEVBQUFJLEtBQ0FGLEVBQUFHLEtBQUFMLEVBQUFNLElBQ0FKIiwiZmlsZSI6ImluZGV4LmFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBuZ2FwcCA9IGFuZ3VsYXIubW9kdWxlKCduZ2FwcCcsIFsnbmdSb3V0ZScsJ25nUmVzb3VyY2UnLCduZ0FuaW1hdGUnXSk7XG5cbm5nYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJHJlc291cmNlUHJvdmlkZXIpe1xuXG5cdCRyb3V0ZVByb3ZpZGVyXG5cdFx0LndoZW4oJy8nLCB7XG5cdFx0XHR0ZW1wbGF0ZVVybDogJ25nYXBwL3NlYXJjaC9zZWFyY2guaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnU2VhcmNoQ3RybCcsXG5cdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdGZhY2lsaXRpZXM6IGZ1bmN0aW9uKEZhY2lsaXR5UmVzb3VyY2Upe1xuXHRcdFx0XHRcdHJldHVybiBGYWNpbGl0eVJlc291cmNlLnF1ZXJ5KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KVxuXHRcdC5vdGhlcndpc2Uoe1xuXHRcdFx0cmVkaXJlY3RUbzogJy8nXG5cdFx0fSk7XG5cdFxuXHQvLyByZWR1Y2VzIHJlc3BvbnNlIGZyb20ge2NvZGU6XCJcIiwgbXNnOlwiXCIsIGRhdGE6e319IHRvIGp1c3QgZGF0YVxuXHRmdW5jdGlvbiB0cmFuc2Zvcm1PbmUoZGF0YSl7XG5cdFx0dmFyIGpzb25EYXRhID0gYW5ndWxhci5mcm9tSnNvbihkYXRhKTtcblx0XHR2YXIgcmVzdWx0ID0ganNvbkRhdGEuZGF0YSB8fCB7fTtcblx0XHRyZXN1bHQuJGNvZGUgPSBqc29uRGF0YS5jb2RlO1xuXHRcdHJlc3VsdC4kbXNnID0ganNvbkRhdGEubXNnO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvLyByZWR1Y2VzIHJlc3BvbnNlIGZyb20ge2NvZGU6XCJcIiwgbXNnOlwiXCIsIGRhdGE6W119IHRvIGp1c3QgZGF0YVxuXHRmdW5jdGlvbiB0cmFuc2Zvcm1BbGwoZGF0YSl7XG5cdFx0dmFyIGpzb25EYXRhID0gYW5ndWxhci5mcm9tSnNvbihkYXRhKTtcblx0XHR2YXIgcmVzdWx0ID0ganNvbkRhdGEuZGF0YSB8fCBbXTtcblx0XHRyZXN1bHQuJGNvZGUgPSBqc29uRGF0YS5jb2RlO1xuXHRcdHJlc3VsdC4kbXNnID0ganNvbkRhdGEubXNnO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQkcmVzb3VyY2VQcm92aWRlci5kZWZhdWx0cy5hY3Rpb25zID0ge1xuXHRcdGdldDoge1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHBhcmFtczoge2lkOidAcmVnaXN0cnlJZCd9LFxuXHRcdFx0dHJhbnNmb3JtUmVzcG9uc2U6IHRyYW5zZm9ybU9uZVxuXHRcdH0sXG5cdFx0cXVlcnk6IHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRpc0FycmF5OiB0cnVlLFxuXHRcdFx0dHJhbnNmb3JtUmVzcG9uc2U6IHRyYW5zZm9ybUFsbFxuXHRcdH1cblx0fTtcblxufSk7XG5cbm5nYXBwLmZhY3RvcnkoJ0ZhY2lsaXR5UmVzb3VyY2UnLGZ1bmN0aW9uKCRyZXNvdXJjZSl7XG5cdHJldHVybiAkcmVzb3VyY2UoJy9hcGkvZmFjaWxpdGllcy86aWQnKTtcbn0pOyIsIm5nYXBwLmNvbnRyb2xsZXIoJ1NlYXJjaEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBmYWNpbGl0aWVzLCBGYWNpbGl0eVJlc291cmNlKXtcbiAgICAkc2NvcGUuZmFjaWxpdGllcyA9IGZhY2lsaXRpZXM7XG4gICAgXG4gICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5mYWNpbGl0aWVzID0gRmFjaWxpdHlSZXNvdXJjZS5xdWVyeSgkc2NvcGUuc2VhcmNoUGFyYW1ldGVycyk7XG4gICAgfTtcblxuICAgICRzY29wZS5nZXRGYWNpbGl0aWVzID0gZnVuY3Rpb24oKXtcbiAgICBcdGNvbnNvbGUubG9nKCRzY29wZS5xKTtcbiAgICBcdGlmKCRzY29wZS5xLmxlbmd0aCA+IDMpe1xuXHQgICAgXHQkc2NvcGUuZmFjaWxpdGllcyA9ICRodHRwLmdldCgnL2FwaS9mYWNpbGl0aWVzL3NlYXJjaC8nICsgJHNjb3BlLnEuc3BsaXQoJyAnKS5qb2luKCcrJykpXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0ICAgIFx0XHRcdCRzY29wZS5mYWNpbGl0aWVzID0gJHNjb3BlLnRyYW5zZm9ybUFsbChyZXNwb25zZS5kYXRhKTtcblx0ICAgIFx0XHRcdGNvbnNvbGUubG9nKCdmYWNpbGl0aWVzOiAnICsgJHNjb3BlLmZhY2lsaXRpZXMpO1xuXHQgICAgXHRcdH0pO1xuICAgIFx0fVxuICAgIH07XG4gICAgXG4gICAgJHNjb3BlLnRyYW5zZm9ybUFsbCA9IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdHZhciBqc29uRGF0YSA9IGFuZ3VsYXIuZnJvbUpzb24oZGF0YSk7XG5cdFx0dmFyIHJlc3VsdCA9IGpzb25EYXRhLmRhdGEgfHwgW107XG5cdFx0cmVzdWx0LiRjb2RlID0ganNvbkRhdGEuY29kZTtcblx0XHRyZXN1bHQuJG1zZyA9IGpzb25EYXRhLm1zZztcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
