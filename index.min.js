var ngapp=angular.module("ngapp",["ngRoute","ngResource","ngAnimate"]);ngapp.config(["$routeProvider","$resourceProvider",function(e,r){function a(e,r,a){var t=angular.fromJson(e),n=t.data||{};return Object.getOwnPropertyNames(t).forEach(function(e){"data"!==e&&(n["$"+e]=t[e])}),n}function t(e,r,a){var t=angular.fromJson(e),n=t.data||[];return Object.getOwnPropertyNames(t).forEach(function(e){"data"!==e&&(n["$"+e]=t[e])}),n}function n(e){return Object.getOwnPropertyNames(e.data).forEach(function(r){"$"===r.substring(0,1)&&(e.resource[r]=e.data[r])}),e.resource}function o(e){return console.log("error interceptor status: "+e.status),e.resource}e.when("/search",{templateUrl:"ngapp/search/search.html",controller:"SearchCtrl"}).when("/",{templateUrl:"ngapp/developer/developer.html"}).otherwise({redirectTo:"/"}),r.defaults.actions={get:{method:"GET",params:{id:"@registryId"},transformResponse:a},query:{method:"GET",isArray:!0,transformResponse:t,interceptor:{response:n,responseError:o}}}}]),ngapp.factory("FacilityResource",["$resource",function(e){return e("/api/facilities/:id",{page:1,pageSize:50})}]),ngapp.controller("SearchCtrl",["$scope","$http","FacilityResource","$timeout","$location","$httpParamSerializerJQLike",function(e,r,a,t,n,o){function s(){var r={};for(var a in e.searchParameters){if(null===e.searchParameters[a]||""===e.searchParameters[a]){delete e.searchParameters[a];break}if("q"==a){var t=e.searchParameters[a];r[a]=t.replace(/\s+/g,"|");break}r[a]=e.searchParameters[a]}var n=angular.extend({},r,e.pager);return n}e.pager={pageSize:50},e.pages=[],e.search=function(r){0===r||r>e.pages[e.pages.length-1]||(e.pager.page=r||1,e.pages=[],e.facilities=a.query(s()),e.facilities.$promise.then(function(r){var a;if(r.$pages-e.pager.page<2)for(a=r.$pages;a>1&&e.pages.length<5;a--)e.pages.unshift(a);else for(a=Math.max(e.pager.page-2,1);a<=r.$pages&&e.pages.length<5;a++)e.pages.push(a)}))},e.search(),e.update=function(e){r({method:"GET",url:"/api/files?type=FRS&subtype="+e}).then(function(e){},function(e){})},e.toggleForm=function(){e.searchParameters={},$("form").collapse("toggle")},e.requestUrl=function(){return n.protocol()+"://"+n.host()+"/api/facilities?"+o(s())}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nYXBwL25nYXBwLmpzIiwibmdhcHAvc2VhcmNoL3NlYXJjaC5qcyJdLCJuYW1lcyI6WyJuZ2FwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRyZXNvdXJjZVByb3ZpZGVyIiwidHJhbnNmb3JtT25lIiwiZGF0YSIsImhlYWRlcnNHZXR0ZXIiLCJzdGF0dXMiLCJqc29uRGF0YSIsImZyb21Kc29uIiwicmVzdWx0IiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJwcm9wZXJ0eU5hbWUiLCJ0cmFuc2Zvcm1BbGwiLCJyZXNwb25zZUludGVyY2VwdG9yIiwicmVzcG9uc2UiLCJzdWJzdHJpbmciLCJyZXNvdXJjZSIsInJlc3BvbnNlRXJyb3JJbnRlcmNlcHRvciIsImNvbnNvbGUiLCJsb2ciLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImRlZmF1bHRzIiwiYWN0aW9ucyIsImdldCIsIm1ldGhvZCIsInBhcmFtcyIsImlkIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJxdWVyeSIsImlzQXJyYXkiLCJpbnRlcmNlcHRvciIsInJlc3BvbnNlRXJyb3IiLCJmYWN0b3J5IiwiJHJlc291cmNlIiwicGFnZSIsInBhZ2VTaXplIiwiJHNjb3BlIiwiJGh0dHAiLCJGYWNpbGl0eVJlc291cmNlIiwiJHRpbWVvdXQiLCIkbG9jYXRpb24iLCIkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSIsInNlYXJjaFBhcmFtcyIsImZvcm1hdHRlZFBhcmFtcyIsImkiLCJzZWFyY2hQYXJhbWV0ZXJzIiwic3RyIiwicmVwbGFjZSIsImV4dGVuZCIsInBhZ2VyIiwicGFnZXMiLCJzZWFyY2giLCJsZW5ndGgiLCJmYWNpbGl0aWVzIiwiJHByb21pc2UiLCJ0aGVuIiwiJHBhZ2VzIiwidW5zaGlmdCIsIk1hdGgiLCJtYXgiLCJwdXNoIiwidXBkYXRlIiwic3RhdGUiLCJ1cmwiLCJ0b2dnbGVGb3JtIiwiJCIsImNvbGxhcHNlIiwicmVxdWVzdFVybCIsInByb3RvY29sIiwiaG9zdCJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBQUEsT0FBQUMsUUFBQUMsT0FBQSxTQUFBLFVBQUEsYUFBQSxhQUVBRixPQUFBRyxRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBZUEsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBVCxRQUFBVSxTQUFBSixHQUNBSyxFQUFBRixFQUFBSCxRQUtBLE9BSkFNLFFBQUFDLG9CQUFBSixHQUFBSyxRQUFBLFNBQUFDLEdBQ0EsU0FBQUEsSUFDQUosRUFBQSxJQUFBSSxHQUFBTixFQUFBTSxNQUVBSixFQUlBLFFBQUFLLEdBQUFWLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQVQsUUFBQVUsU0FBQUosR0FDQUssRUFBQUYsRUFBQUgsUUFLQSxPQUpBTSxRQUFBQyxvQkFBQUosR0FBQUssUUFBQSxTQUFBQyxHQUNBLFNBQUFBLElBQ0FKLEVBQUEsSUFBQUksR0FBQU4sRUFBQU0sTUFFQUosRUFHQSxRQUFBTSxHQUFBQyxHQU1BLE1BSkFOLFFBQUFDLG9CQUFBSyxFQUFBWixNQUFBUSxRQUFBLFNBQUFDLEdBQ0EsTUFBQUEsRUFBQUksVUFBQSxFQUFBLEtBQ0FELEVBQUFFLFNBQUFMLEdBQUFHLEVBQUFaLEtBQUFTLE1BRUFHLEVBQUFFLFNBR0EsUUFBQUMsR0FBQUgsR0FHQSxNQUZBSSxTQUFBQyxJQUFBLDZCQUFBTCxFQUFBVixRQUVBVSxFQUFBRSxTQTlDQWpCLEVBQ0FxQixLQUFBLFdBQ0FDLFlBQUEsMkJBQ0FDLFdBQUEsZUFFQUYsS0FBQSxLQUNBQyxZQUFBLG1DQUVBRSxXQUNBQyxXQUFBLE1Bd0NBeEIsRUFBQXlCLFNBQUFDLFNBQ0FDLEtBQ0FDLE9BQUEsTUFDQUMsUUFBQUMsR0FBQSxlQUNBQyxrQkFBQTlCLEdBRUErQixPQUNBSixPQUFBLE1BQ0FLLFNBQUEsRUFDQUYsa0JBQUFuQixFQUNBc0IsYUFDQXBCLFNBQUFELEVBQ0FzQixjQUFBbEIsUUFPQXRCLE1BQUF5QyxRQUFBLG9CQUFBLFlBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBLHVCQUFBQyxLQUFBLEVBQUFDLFNBQUEsUUN6RUE1QyxNQUFBMkIsV0FBQSxjQUFBLFNBQUEsUUFBQSxtQkFBQSxXQUFBLFlBQUEsNkJBQUEsU0FBQWtCLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBU0EsUUFBQUMsS0FFQSxHQUFBQyxLQUVBLEtBQUEsR0FBQUMsS0FBQVIsR0FBQVMsaUJBQUEsQ0FDQSxHQUFBLE9BQUFULEVBQUFTLGlCQUFBRCxJQUFBLEtBQUFSLEVBQUFTLGlCQUFBRCxHQUFBLE9BQ0FSLEdBQUFTLGlCQUFBRCxFQUNBLE9BQ0EsR0FBQSxLQUFBQSxFQUFBLENBQ0EsR0FBQUUsR0FBQVYsRUFBQVMsaUJBQUFELEVBQ0FELEdBQUFDLEdBQUFFLEVBQUFDLFFBQUEsT0FBQSxJQUNBLE9BRUFKLEVBQUFDLEdBQUFSLEVBQUFTLGlCQUFBRCxHQU9BLEdBQUFuQixHQUFBakMsUUFBQXdELFVBQUFMLEVBQUFQLEVBQUFhLE1BQ0EsT0FBQXhCLEdBNUJBVyxFQUFBYSxPQUNBZCxTQUFBLElBRUFDLEVBQUFjLFNBNEJBZCxFQUFBZSxPQUFBLFNBQUFqQixHQUNBLElBQUFBLEdBQUFBLEVBQUFFLEVBQUFjLE1BQUFkLEVBQUFjLE1BQUFFLE9BQUEsS0FLQWhCLEVBQUFhLE1BQUFmLEtBQUFBLEdBQUEsRUFDQUUsRUFBQWMsU0FFQWQsRUFBQWlCLFdBQUFmLEVBQUFWLE1BQUFjLEtBSUFOLEVBQUFpQixXQUFBQyxTQUFBQyxLQUFBLFNBQUF6RCxHQUNBLEdBQUFvQyxFQUNBLElBQUFwQyxFQUFBMEQsT0FBQXBCLEVBQUFhLE1BQUFmLEtBQUEsRUFFQSxJQUFBQSxFQUFBcEMsRUFBQTBELE9BQUF0QixFQUFBLEdBQUFFLEVBQUFjLE1BQUFFLE9BQUEsRUFBQWxCLElBQ0FFLEVBQUFjLE1BQUFPLFFBQUF2QixPQUdBLEtBQUFBLEVBQUF3QixLQUFBQyxJQUFBdkIsRUFBQWEsTUFBQWYsS0FBQSxFQUFBLEdBQUFBLEdBQUFwQyxFQUFBMEQsUUFBQXBCLEVBQUFjLE1BQUFFLE9BQUEsRUFBQWxCLElBQ0FFLEVBQUFjLE1BQUFVLEtBQUExQixPQUtBRSxFQUFBZSxTQUVBZixFQUFBeUIsT0FBQSxTQUFBQyxHQUNBekIsR0FDQWIsT0FBQSxNQUNBdUMsSUFBQSwrQkFBQUQsSUFDQVAsS0FBQSxTQUFBN0MsS0FHQSxTQUFBQSxPQU9BMEIsRUFBQTRCLFdBQUEsV0FDQTVCLEVBQUFTLG9CQUNBb0IsRUFBQSxRQUFBQyxTQUFBLFdBR0E5QixFQUFBK0IsV0FBQSxXQUNBLE1BQUEzQixHQUFBNEIsV0FBQSxNQUFBNUIsRUFBQTZCLE9BQUEsbUJBQUE1QixFQUFBQyIsImZpbGUiOiJpbmRleC5hbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBhbmd1bGFyKi9cbnZhciBuZ2FwcCA9IGFuZ3VsYXIubW9kdWxlKCduZ2FwcCcsIFsnbmdSb3V0ZScsJ25nUmVzb3VyY2UnLCduZ0FuaW1hdGUnXSk7XG5cbm5nYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJHJlc291cmNlUHJvdmlkZXIpe1xuXG5cdCRyb3V0ZVByb3ZpZGVyXG5cdFx0LndoZW4oJy9zZWFyY2gnLCB7XG5cdFx0XHR0ZW1wbGF0ZVVybDogJ25nYXBwL3NlYXJjaC9zZWFyY2guaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnU2VhcmNoQ3RybCdcblx0XHR9KVxuXHRcdC53aGVuKCcvJywge1xuXHRcdFx0dGVtcGxhdGVVcmw6ICduZ2FwcC9kZXZlbG9wZXIvZGV2ZWxvcGVyLmh0bWwnXG5cdFx0fSlcblx0XHQub3RoZXJ3aXNlKHtcblx0XHRcdHJlZGlyZWN0VG86ICcvJ1xuXHRcdH0pO1xuXHRcblx0Ly8gcmVkdWNlcyByZXNwb25zZSBmcm9tIHtjb2RlOlwiXCIsIG1zZzpcIlwiLCBkYXRhOnt9fSB0byBqdXN0IGRhdGFcblx0ZnVuY3Rpb24gdHJhbnNmb3JtT25lKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyl7XG5cdFx0dmFyIGpzb25EYXRhID0gYW5ndWxhci5mcm9tSnNvbihkYXRhKTtcblx0XHR2YXIgcmVzdWx0ID0ganNvbkRhdGEuZGF0YSB8fCB7fTtcblx0XHRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhqc29uRGF0YSkuZm9yRWFjaChmdW5jdGlvbihwcm9wZXJ0eU5hbWUpe1xuXHRcdFx0aWYgKHByb3BlcnR5TmFtZSAhPT0gJ2RhdGEnKVxuXHRcdFx0XHRyZXN1bHRbJyQnICsgcHJvcGVydHlOYW1lXSA9IGpzb25EYXRhW3Byb3BlcnR5TmFtZV07XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8vIHJlZHVjZXMgcmVzcG9uc2UgZnJvbSB7Y29kZTpcIlwiLCBtc2c6XCJcIiwgZGF0YTpbXX0gdG8ganVzdCBkYXRhXG5cdGZ1bmN0aW9uIHRyYW5zZm9ybUFsbChkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpe1xuXHRcdHZhciBqc29uRGF0YSA9IGFuZ3VsYXIuZnJvbUpzb24oZGF0YSk7XG5cdFx0dmFyIHJlc3VsdCA9IGpzb25EYXRhLmRhdGEgfHwgW107XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoanNvbkRhdGEpLmZvckVhY2goZnVuY3Rpb24ocHJvcGVydHlOYW1lKXtcblx0XHRcdGlmIChwcm9wZXJ0eU5hbWUgIT09ICdkYXRhJylcblx0XHRcdFx0cmVzdWx0WyckJyArIHByb3BlcnR5TmFtZV0gPSBqc29uRGF0YVtwcm9wZXJ0eU5hbWVdO1xuXHRcdH0pO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc3BvbnNlSW50ZXJjZXB0b3IocmVzcG9uc2Upe1xuXHRcdC8vIG1vdmUgYW55ICQgZGF0YSBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIHJlc291cmNlXG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocmVzcG9uc2UuZGF0YSkuZm9yRWFjaChmdW5jdGlvbihwcm9wZXJ0eU5hbWUpe1xuXHRcdFx0aWYgKHByb3BlcnR5TmFtZS5zdWJzdHJpbmcoMCwxKSA9PT0gJyQnKVxuXHRcdFx0XHRyZXNwb25zZS5yZXNvdXJjZVtwcm9wZXJ0eU5hbWVdID0gcmVzcG9uc2UuZGF0YVtwcm9wZXJ0eU5hbWVdO1xuXHRcdH0pO1xuXHRcdHJldHVybiByZXNwb25zZS5yZXNvdXJjZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzcG9uc2VFcnJvckludGVyY2VwdG9yKHJlc3BvbnNlKXtcblx0XHRjb25zb2xlLmxvZyhcImVycm9yIGludGVyY2VwdG9yIHN0YXR1czogXCIgKyByZXNwb25zZS5zdGF0dXMpO1xuXHRcdFxuXHRcdHJldHVybiByZXNwb25zZS5yZXNvdXJjZTtcblx0fVxuXG5cdCRyZXNvdXJjZVByb3ZpZGVyLmRlZmF1bHRzLmFjdGlvbnMgPSB7XG5cdFx0Z2V0OiB7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0cGFyYW1zOiB7aWQ6J0ByZWdpc3RyeUlkJ30sXG5cdFx0XHR0cmFuc2Zvcm1SZXNwb25zZTogdHJhbnNmb3JtT25lXG5cdFx0fSxcblx0XHRxdWVyeToge1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdGlzQXJyYXk6IHRydWUsXG5cdFx0XHR0cmFuc2Zvcm1SZXNwb25zZTogdHJhbnNmb3JtQWxsLFxuXHRcdFx0aW50ZXJjZXB0b3I6IHtcblx0XHRcdFx0cmVzcG9uc2U6IHJlc3BvbnNlSW50ZXJjZXB0b3IsXG5cdFx0XHRcdHJlc3BvbnNlRXJyb3I6IHJlc3BvbnNlRXJyb3JJbnRlcmNlcHRvclxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxufSk7XG5cbm5nYXBwLmZhY3RvcnkoJ0ZhY2lsaXR5UmVzb3VyY2UnLGZ1bmN0aW9uKCRyZXNvdXJjZSl7XG5cdHJldHVybiAkcmVzb3VyY2UoJy9hcGkvZmFjaWxpdGllcy86aWQnLHtwYWdlOiAxLCBwYWdlU2l6ZTogNTB9KTtcbn0pOyIsIi8qZ2xvYmFsIGFuZ3VsYXIsbmdhcHAqL1xubmdhcHAuY29udHJvbGxlcignU2VhcmNoQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIEZhY2lsaXR5UmVzb3VyY2UsICR0aW1lb3V0LCRsb2NhdGlvbiwkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSl7XG4gICAgXG4gICAgJHNjb3BlLnBhZ2VyID0ge1xuICAgICAgICBwYWdlU2l6ZTogNTBcbiAgICB9O1xuICAgICRzY29wZS5wYWdlcyA9IFtdO1xuICAgIFxuICAgIC8vIGJ1aWxkIGEgbmV3IGpzb24gb2JqZWN0IGFzIHRoZSByZXF1ZXN0IHBhcmFtZXRlcnMgZnJvbSB0aGUgc2VhcmNoIGFuZCBwYWdlclxuICAgIC8vIHRoZSByZXNvdXJjZSBoYXMgZGVmYXVsdHMge3BhZ2U6IDEsIHBhZ2VTaXplOiA1MH1cbiAgICBmdW5jdGlvbiBzZWFyY2hQYXJhbXMoKXtcblxuICAgICAgICB2YXIgZm9ybWF0dGVkUGFyYW1zID0ge307XG4gICAgICAgIC8vIHRyaW0gdW51c2VkIGF0dHJpYnV0ZXMgZm9yIGNsZWFuZXIgcmVxdWVzdCB1cmxzXG4gICAgICAgIGZvciAodmFyIGkgaW4gJHNjb3BlLnNlYXJjaFBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2VhcmNoUGFyYW1ldGVyc1tpXSA9PT0gbnVsbCB8fCAkc2NvcGUuc2VhcmNoUGFyYW1ldGVyc1tpXSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgJHNjb3BlLnNlYXJjaFBhcmFtZXRlcnNbaV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9ZWxzZSBpZihpID09IFwicVwiKXtcbiAgICAgICAgICAgICAgICB2YXIgc3RyID0gJHNjb3BlLnNlYXJjaFBhcmFtZXRlcnNbaV07XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGFyYW1zW2ldID0gc3RyLnJlcGxhY2UoL1xccysvZywgJ3wnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcm1hdHRlZFBhcmFtc1tpXSA9ICRzY29wZS5zZWFyY2hQYXJhbWV0ZXJzW2ldO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyB0b2RvIDogYWx0ZXIgcSB0byBwYXNzIGluIHJlZ2V4cCBzeW50YXggc2ltaWxhciB0byBnb29nbGUtc3R5bGUgc2VhcmNoaW5nXG4gICAgICAgIC8vIGh0dHBzOi8vc3VwcG9ydC5nb29nbGUuY29tL3dlYnNlYXJjaC9hbnN3ZXIvMjQ2NjQzMz9obD1lblxuICAgICAgICAvLyBlLmcuIHF1b3RlcywgYXN0ZXJpc2ssIG1pbnVzLCBudW1iZXIgcmFuZ2VcblxuICAgICAgICB2YXIgcGFyYW1zID0gYW5ndWxhci5leHRlbmQoe30sIGZvcm1hdHRlZFBhcmFtcywgJHNjb3BlLnBhZ2VyKTtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgXG4gICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKHBhZ2Upe1xuICAgICAgICBpZiAocGFnZSA9PT0gMCB8fCBwYWdlID4gJHNjb3BlLnBhZ2VzWyRzY29wZS5wYWdlcy5sZW5ndGggLSAxXSl7XG4gICAgICAgICAgICAvLyBiYWQgcGFnZSBwYXJhbWV0ZXJcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJHNjb3BlLnBhZ2VyLnBhZ2UgPSBwYWdlIHx8IDE7XG4gICAgICAgICRzY29wZS5wYWdlcyA9IFtdO1xuICAgICAgICBcbiAgICAgICAgJHNjb3BlLmZhY2lsaXRpZXMgPSBGYWNpbGl0eVJlc291cmNlLnF1ZXJ5KHNlYXJjaFBhcmFtcygpKTtcblxuICAgICAgICAvLyBtYW5hZ2UgdGhlIGFycmF5IG9mIHBhZ2VzXG4gICAgICAgIC8vIHdlJ2xsIGxpbWl0IGl0IHRvIDUgd2l0aCB0aGUgY3VycmVudCBwYWdlIGluIHRoZSBjZW50ZXJcbiAgICAgICAgJHNjb3BlLmZhY2lsaXRpZXMuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHZhciBwYWdlO1xuICAgICAgICAgICAgaWYgKGRhdGEuJHBhZ2VzIC0gJHNjb3BlLnBhZ2VyLnBhZ2UgPCAyKXtcbiAgICAgICAgICAgICAgICAvLyBpdCdzIGNsb3NlIHRvIHRoZSBlbmQsIGxvYWQgdGhlIHBhZ2VzIGJhY2t3YXJkc1xuICAgICAgICAgICAgICAgIGZvcihwYWdlID0gZGF0YS4kcGFnZXM7IHBhZ2UgPiAxICYmICRzY29wZS5wYWdlcy5sZW5ndGggPCA1OyBwYWdlLS0pXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlcy51bnNoaWZ0KHBhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGFydCBmcm9tIDEgb3IgY3VycmVudCBwYWdlIG1pbnVzIDIgKHdoaWNoZXZlciBpcyBsYXJnZXIpXG4gICAgICAgICAgICAgICAgZm9yKHBhZ2UgPSBNYXRoLm1heCgkc2NvcGUucGFnZXIucGFnZSAtIDIsMSk7IHBhZ2UgPD0gZGF0YS4kcGFnZXMgJiYgJHNjb3BlLnBhZ2VzLmxlbmd0aCA8IDU7IHBhZ2UrKylcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2VzLnB1c2gocGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgJHNjb3BlLnNlYXJjaCgpO1xuXG4gICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKXtcbiAgICAgICAkaHR0cCh7XG4gICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICB1cmw6ICcvYXBpL2ZpbGVzP3R5cGU9RlJTJnN1YnR5cGU9JyArIHN0YXRlXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5XG4gICAgICAgICAgICAvLyB3aGVuIHRoZSByZXNwb25zZSBpcyBhdmFpbGFibGVcbiAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXG4gICAgICAgICAgICAvLyBvciBzZXJ2ZXIgcmV0dXJucyByZXNwb25zZSB3aXRoIGFuIGVycm9yIHN0YXR1cy5cbiAgICAgICAgICB9KTtcblxuICAgIH1cblxuXHQkc2NvcGUudG9nZ2xlRm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5zZWFyY2hQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICQoJ2Zvcm0nKS5jb2xsYXBzZSgndG9nZ2xlJyk7XG5cdH07XG5cdFxuXHQkc2NvcGUucmVxdWVzdFVybCA9IGZ1bmN0aW9uKCl7XG5cdCAgICByZXR1cm4gJGxvY2F0aW9uLnByb3RvY29sKCkgKyAnOi8vJyArICRsb2NhdGlvbi5ob3N0KCkgKyAnL2FwaS9mYWNpbGl0aWVzPycgKyAkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZShzZWFyY2hQYXJhbXMoKSk7XG5cdH07XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
